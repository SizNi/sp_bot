# Настройка администраторов для Telegram бота

## Обзор

Система администраторов позволяет управлять турнирами и другими функциями бота. Только администраторы могут:
- Создавать турниры
- Добавлять/удалять других администраторов
- Управлять системой

## Настройка первого администратора

### Шаг 1: Взаимодействие с ботом
Пользователь должен сначала взаимодействовать с ботом (например, отправить `/start`), чтобы быть зарегистрированным в системе.

### Шаг 2: Назначение администратора
Используйте скрипт для назначения первого администратора:

```bash
cd /home/ovechka/sp
source venv/bin/activate
python scripts/setup_admin.py <telegram_username>
```

Пример:
```bash
python scripts/setup_admin.py john_doe
```

### Шаг 3: Проверка
Отправьте боту команду `/start` - если вы администратор, вы увидите дополнительные команды в списке.

## Команды администратора

### В Telegram боте:

- `/addadmin @username` - добавить администратора
- `/removeadmin @username` - убрать администратора  
- `/tournament` - создать турнир (пока в разработке)

### Примеры использования:

```
/addadmin @john_doe
/removeadmin @jane_smith
```

## Безопасность

- Только существующие администраторы могут назначать новых администраторов
- Пользователь должен быть зарегистрирован в системе перед назначением администратором
- Администраторы могут управлять только через Telegram бота

## Устранение неполадок

### Пользователь не найден
Убедитесь, что пользователь уже взаимодействовал с ботом (отправил `/start`).

### Нет прав администратора
Проверьте, что вы являетесь администратором, отправив `/start` боту.

### Ошибки базы данных
Убедитесь, что база данных запущена и миграции применены:
```bash
alembic upgrade head
``` 